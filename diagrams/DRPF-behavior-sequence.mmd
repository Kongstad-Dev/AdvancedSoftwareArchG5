sequenceDiagram
    autonumber
    title Use Case 2 â€” Dynamic Reconfiguration of Production Workflow

    %% Participants
    actor Manager as Factory Manager
    participant Scheduler as Production Scheduler
    participant Optimizer as Optimizer Service
    participant Engine as Workflow Engine

    %% Preconditions
    note over Scheduler,Engine: Multiple workflows available and system is adaptable
    note over Optimizer,Scheduler: Objective includes workload, deadlines, and energy use

    %% 1. Scheduler evaluates context
    Scheduler ->> Optimizer: Send current workload, deadlines, energy profile
    Optimizer ->> Optimizer: Analyze options and constraints
    alt Better configuration exists
        %% 2. Optimizer proposes modifications
        Optimizer -->> Scheduler: Proposal set\nfaster workflow or greener option or task redistribution
        %% 3. Manager review and approval
        Scheduler ->> Manager: Present reconfiguration proposal and impact
        alt Manager approves
            Manager -->> Scheduler: Approved
            %% 4. Apply changes without stopping the system
            Scheduler ->> Engine: Apply reconfiguration\nversion new workflow and update routing
            par Zero downtime application
                Engine ->> Engine: Hot swap workflow while jobs continue
                Engine -->> Scheduler: Reconfiguration applied
            end
            Scheduler -->> Manager: Update complete and system running
            %% Postcondition
            note over Scheduler,Optimizer: System adapts to new conditions and remains modifiable
        else Manager rejects or requests changes
            Manager -->> Scheduler: Rejected or needs revision
            Scheduler ->> Optimizer: Provide feedback and constraints\niterate proposal
        end
    else No improvement found
        Optimizer -->> Scheduler: No reconfiguration recommended
        Scheduler -->> Manager: No change needed at this time
    end

sequenceDiagram
    autonumber
    title Use Case 2 â€” Dynamic Reconfiguration of Production Workflow

    %% Participants
    box rgb(200, 220, 255) Production Management System (PMS)
        participant Scheduling as Scheduling Subsystem
        participant Optimizer as Optimizer Service
        participant WorkflowConfig as Workflow Configuration Subsystem
    end
    box rgb(255, 220, 200) Monitoring and Maintenance System (MMS)
        participant Monitor as Monitoring Subsystem
    end

    %% Preconditions
    note over Scheduling,WorkflowConfig: Multiple workflows available and system is adaptable

    %% 1. Continuous monitoring provides context
    Monitor ->> Scheduling: Real-time production metrics and machine health

    %% 2. Scheduler evaluates context
    Scheduling ->> Scheduling: Evaluate workload, deadlines, and energy consumption
    Scheduling ->> Optimizer: Request optimization analysis with current constraints

    %% 3. Optimizer analyzes and proposes
    Optimizer ->> Optimizer: Analyze workflow options and constraints
    
    alt Better configuration found
        Optimizer -->> Scheduling: Return reconfiguration proposal\n(faster workflow / greener option / task redistribution)
        
        %% 4. Apply reconfiguration
        Scheduling ->> WorkflowConfig: Execute reconfiguration\napply new workflow version and update routing
        
        par Zero-downtime application
            WorkflowConfig ->> WorkflowConfig: Hot-swap workflow while jobs continue
            WorkflowConfig ->> Monitor: Notify configuration change
            Monitor ->> Monitor: Track transition metrics
        end
        
        WorkflowConfig -->> Scheduling: Reconfiguration applied successfully
        
        %% Postcondition
        note over Scheduling,WorkflowConfig: System adapts to new conditions, remains modifiable
        
    else No improvement found
        Optimizer -->> Scheduling: No reconfiguration recommended
        note over Scheduling: Continue monitoring for future optimization opportunities
    end
